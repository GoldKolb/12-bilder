<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>360° Schmuck Viewer</title>
<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  #viewer {
    max-width: 100%;
    max-height: 100%;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }
</style>
</head>
<body>

<img id="viewer" src="EinzelA01.jpg" alt="360° Schmuck" />

<script>
  (function() {
    var img = document.getElementById('viewer');
    var totalFrames = 12;             // Anzahl deiner Bilder
    var currentFrame = 1;
    var rotationSpeed = 150;          // Zeit in ms zwischen Bildwechsel
    var autoRotateInterval;
    var isDragging = false;
    var dragStartX = 0;
    var frameAtDragStart = 1;
    var inactivityTimeout;
    var inactivityDelay = 5000;       // 5 Sekunden nach Interaktion Neustart

    function updateImage(frame) {
      var frameStr = frame < 10 ? "0" + frame : frame;
      img.src = "EinzelA" + frameStr + ".jpg";
    }

    function nextFrame() {
      currentFrame++;
      if (currentFrame > totalFrames) currentFrame = 1;
      updateImage(currentFrame);
    }

    function startAutoRotate() {
      stopAutoRotate();
      autoRotateInterval = setInterval(nextFrame, rotationSpeed);
    }

    function stopAutoRotate() {
      if (autoRotateInterval) {
        clearInterval(autoRotateInterval);
        autoRotateInterval = null;
      }
    }

    function resetInactivityTimer() {
      if (inactivityTimeout) clearTimeout(inactivityTimeout);
      inactivityTimeout = setTimeout(() => {
        if (!isDragging) {
          startAutoRotate();
        }
      }, inactivityDelay);
    }

    // Auto-Rotation starten beim Laden der Seite
    startAutoRotate();

    // Maus-Down: Drag starten
    img.addEventListener('mousedown', function(e) {
      isDragging = true;
      stopAutoRotate();
      dragStartX = e.clientX;
      frameAtDragStart = currentFrame;
      e.preventDefault();  // Verhindert z.B. Bildauswahl
    });

    // Maus-Move: Rotation durchziehen
    img.addEventListener('mousemove', function(e) {
      if (!isDragging) return;

      var deltaX = e.clientX - dragStartX;
      var frameShift = Math.floor(deltaX / 10); // 10px pro Frame wechseln

      var newFrame = frameAtDragStart + frameShift;
      while (newFrame < 1) newFrame += totalFrames;
      while (newFrame > totalFrames) newFrame -= totalFrames;

      if (newFrame !== currentFrame) {
        currentFrame = newFrame;
        updateImage(currentFrame);
      }

      resetInactivityTimer();
    });

    // Maus-Up: Drag beenden und Timer für Neustart
    img.addEventListener('mouseup', function(e) {
      if (isDragging) {
        isDragging = false;
        resetInactivityTimer();
      }
    });

    // Maus verlässt Bild: Drag beenden
    img.addEventListener('mouseleave', function(e) {
      if (isDragging) {
        isDragging = false;
        resetInactivityTimer();
      }
    });

    // Touch-Events für mobile Geräte (optional)
    img.addEventListener('touchstart', function(e) {
      if (e.touches.length === 1) {
        isDragging = true;
        stopAutoRotate();
        dragStartX = e.touches[0].clientX;
        frameAtDragStart = currentFrame;
      }
    }, {passive: true});

    img.addEventListener('touchmove', function(e) {
      if (!isDragging || e.touches.length !== 1) return;

      var deltaX = e.touches[0].clientX - dragStartX;
      var frameShift = Math.floor(deltaX / 10);

      var newFrame = frameAtDragStart + frameShift;
      while (newFrame < 1) newFrame += totalFrames;
      while (newFrame > totalFrames) newFrame -= totalFrames;

      if (newFrame !== currentFrame) {
        currentFrame = newFrame;
        updateImage(currentFrame);
      }
      resetInactivityTimer();
    }, {passive: true});

    img.addEventListener('touchend', function(e) {
      if (isDragging) {
        isDragging = false;
        resetInactivityTimer();
      }
    });

    // Kein Cursor-Wechsel (bleibt Standard-Pfeil)
    // Einfach nichts an cursor style ändern
  })();
</script>

</body>
</html>
